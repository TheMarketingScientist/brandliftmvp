<!doctype html>
<meta charset="utf-8" />
<title>Recovery Bridge</title>
<script>
(function () {
  try {
    var app = "https://brandliftmvp-fzomyyitxxamw3xz7gmmzi.streamlit.app";
    // Read both hash (#...) and query (?...) in case Supabase sends either
    var hs = new URLSearchParams((location.hash || "").replace(/^#/, ""));
    var qs = new URLSearchParams(location.search || "");

    // Merge: prefer hash tokens, fall back to query
    var out = new URL(app);
    ["code","auth_code","access_token","refresh_token","type"].forEach(function(k){
      var v = hs.get(k) || qs.get(k);
      if (v) out.searchParams.set(k, v);
    });

    if (!out.searchParams.get("type")) out.searchParams.set("type", "recovery");
    location.replace(out.toString());
  } catch(e) {
    location.replace("https://brandliftmvp-fzomyyitxxamw3xz7gmmzi.streamlit.app");
  }
})();
</script>
<noscript>If you see this, enable JavaScript, or copy the full link from your email into the app's "Paste recovery link" box.</noscript>
